# This script will extract all the isbn numbers from the MARC file and check their validity 
#
# Run this example as:
# catmandu convert MARC --type ALEPHSEQ to YAML --fix ex/marc_sample.fix < ex/marc_sample.txt

do marc_each()
  marc_map(020a,isbn)

  if is_valid_isbn(isbn)
  	marc_set(020x,"ok")
  else
    marc_set(020x,"not ok")
  end

  remove_field(isbn)
end